---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-3.5-turbo","messages":[{"role":"system","content":"You
        are an AI assistant that can classify conversations into routes."},{"role":"user","content":"Given
        the following conversation, classify it into one of the existing routes based
        on the nature of the interaction and the capabilities demonstrated by the
        AI assistant. If the conversation does not fit well into any of the predefined
        routes, suggest a new route, a relevant path and parameters for the category.
        Additionally, provide a short title (less than 10 words) that summarizes the
        conversation.\nExisting routes:\n\u003ccapabilities\u003e\n[{\"name\":\"user_id\",\"path\":\"/user/id\",\"parameters\":{\"id\":\"id\"},\"phrasing\":[\"Show
        user with id :id\",\"My id is :id\",\"I am user :id\"]},{\"name\":\"user_email\",\"path\":\"/user/email\",\"parameters\":{\"email\":\"email\"},\"phrasing\":[\"Show
        user with email :email\",\"My email is :email\",\"I am user :email\"]},{\"name\":\"user_email_authenticate\",\"path\":\"/user/email/authenticate\",\"parameters\":{\"email\":\"email\"},\"phrasing\":[\"Authenticate
        user with email :email\",\"My email is :email\"]}]\n\u003c/capabilities\u003e\n\nConversation:\n\u003cconversation\u003e\nI
        have this request that needs to be categorized. Could you help me figure out
        which of the predefined routes it belongs to?\n\u003c/conversation\u003e\n\nIf
        the conversation fits into an existing route, provide the following:\n- Name:
        [The name of the route]\n- Path: [The path to the route]\n- Parameters: [a
        set of key-value pairs for parameters in snake_case]\n- Title: [A short descriptive
        and specific title summarizing the conversation in less than 10 words]\nIf
        the conversation does not fit well into any existing route, provide the following:\n-
        Topic: [Propose a name for the new category in snake_case]\n- Path: [Propose
        a path in snake_case, separated by commas]\n- Parameters: [Propose a set of
        key-value pairs for parameters in snake_case]\n- Title: [A short descriptive
        and specific title summarizing the conversation in less than 10 words]\n"}],"tools":[{"type":"function","function":{"name":"system_routes","description":"Correctly
        extracted `system_routes` with all the required parameters with correct types","parameters":{"type":"object","properties":{"name":{"type":"string","description":"The
        name of the route"},"path":{"type":"string","description":"The path to the
        route"},"parameters":{"type":"object","title":"system_params","properties":{"key":{"type":"string","description":"The
        parameter key"},"value":{"type":"string","description":"The parameter value"}}},"title":{"type":"string","description":"A
        short description of the conversation"}},"required":["name","path","title"]}}}],"tool_choice":{"type":"function","function":{"name":"system_routes"}}}'
    headers:
      Content-Type:
      - application/json
      Authorization:
      - Bearer <OPENAI_KEY_PLACEHOLDER>
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Sun, 19 May 2024 00:52:28 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Openai-Organization:
      - user-jtftkqrbreteg5pmdrfzchv6
      Openai-Processing-Ms:
      - '571'
      Openai-Version:
      - '2020-10-01'
      Strict-Transport-Security:
      - max-age=15724800; includeSubDomains
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '60000'
      X-Ratelimit-Remaining-Requests:
      - '9999'
      X-Ratelimit-Remaining-Tokens:
      - '59520'
      X-Ratelimit-Reset-Requests:
      - 8.64s
      X-Ratelimit-Reset-Tokens:
      - 480ms
      X-Request-Id:
      - req_434a7e7ee3f9152e5f9cac5c1c044b89
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=3dmH07KihsHODSiaB_s2qJ9B4MDQMcUgT.xKvO4GDvs-1716079948-1.0.1.1-EmlxetCA0mW7ZsZuVbATwi_20ywUe_GfkXITHST6OAiwsszTINChdlx8YzUr5qieSxvmYguKrfaJuLMu2JHHVw;
        path=/; expires=Sun, 19-May-24 01:22:28 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=DA1ocW3K7ZJa5DYD5VBt7lRhc94Zar_7B8k.Ee_oQ4w-1716079948369-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Server:
      - cloudflare
      Cf-Ray:
      - 88601ab89c9cb3e3-MIA
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-9QP4mkzfE0TL0BlQxgiayZ29ypCij",
          "object": "chat.completion",
          "created": 1716079948,
          "model": "gpt-3.5-turbo-0125",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": null,
                "tool_calls": [
                  {
                    "id": "call_MuhgVDsRgx9DbGXin9VDUMqN",
                    "type": "function",
                    "function": {
                      "name": "system_routes",
                      "arguments": "{\"name\":\"capabilities\",\"path\":\"/capabilities\",\"title\":\"Route Categorization\"}"
                    }
                  }
                ]
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 523,
            "completion_tokens": 16,
            "total_tokens": 539
          },
          "system_fingerprint": null
        }
  recorded_at: Sun, 19 May 2024 00:52:28 GMT
recorded_with: VCR 6.2.0
